!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){D=t}function r(t){U=t}function o(){return function(){return process.nextTick(a)}}function i(){return function(){F(a)}}function s(){var t=0,e=new B(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=""+(t=++t%2)}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<N;t+=2){var e=I[t],n=I[t+1];e(n),I[t]=void 0,I[t+1]=void 0}N=0}function f(){try{var t=require,e=t("vertx");return F=e.runOnLoop||e.runOnContext,i()}catch(n){return c()}}function l(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return R.error=e,R}}function v(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function d(t,e,n){U(function(t){var r=!1,o=v(n,e,function(n){r||(r=!0,e!==n?b(t,n):w(t,n))},function(e){r||(r=!0,A(t,e))});!r&&o&&(r=!0,A(t,o))},t)}function y(t,e){1===e._state?w(t,e._result):2===e._state?A(t,e._result):j(e,void 0,function(e){return b(t,e)},function(e){return A(t,e)})}function m(t,n,r){n.constructor===t.constructor&&r===tt&&n.constructor.resolve===et?y(t,n):r===R?A(t,R.error):void 0===r?w(t,n):e(r)?d(t,n,r):w(t,n)}function b(e,n){e===n?A(e,h()):t(n)?m(e,n,_(n)):w(e,n)}function g(t){t._onerror&&t._onerror(t._result),S(t)}function w(t,e){0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&U(S,t))}function A(t,e){0===t._state&&(t._state=2,t._result=e,U(g,t))}function j(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+1]=n,o[i+2]=r,0===i&&t._state&&U(S,t)}function S(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?T(n,r,o,i):o(i);t._subscribers.length=0}}function E(t,e){try{return t(e)}catch(n){return V.error=n,V}}function T(t,n,r,o){var i,s,u,c,a=e(r);if(a){if(i=E(r,o),i===V?(c=!0,s=i.error,i=null):u=!0,n===i)return void A(n,p())}else i=o,u=!0;0!==n._state||(a&&u?b(n,i):c?A(n,s):1===t?w(n,i):2===t&&A(n,i))}function M(t,e){try{e(function(e){return b(t,e)},function(e){return A(t,e)})}catch(n){A(t,n)}}function P(){return X++}function x(t){t[J]=P(),t._state=void 0,t._result=void 0,t._subscribers=[]}function C(){return new Error("Array Methods must be provided an Array")}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Y(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function k(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=$}var q;q=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var F,D,K,L=q,N=0,U=function(t,e){I[N]=t,I[N+1]=e,N+=2,2===N&&(D?D(a):K())},W="undefined"!=typeof window?window:void 0,z=W||{},B=z.MutationObserver||z.WebKitMutationObserver,G="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),H="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,I=new Array(1e3);K=G?o():B?s():H?u():void 0===W&&"function"==typeof require?f():c();var J=Math.random().toString(36).substring(16),Q=function(){function t(){this.error=null}return t}(),R=new Q,V=new Q,X=0,Z=function(){function t(t,e){this._input=void 0,this._result=void 0,this._state=0,this._remaining=0,this.length=0,this._instanceConstructor=t,this.promise=new t(l),this.promise[J]||x(this.promise),L(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):A(this.promise,C())}return t.prototype._enumerate=function(){for(var t=this,e=t.length,n=t._input,r=0;0===this._state&&r<e;r++)this._eachEntry(n[r],r)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor;if(n.resolve===et){var r=_(t);if(r===tt&&0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===$){var o=new n(l);m(o,t,r),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(n.resolve(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;0===r._state&&(this._remaining--,2===t?A(r,n):this._result[e]=n),0===this._remaining&&w(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;j(t,void 0,function(t){return n._settledAt(1,e,t)},function(t){return n._settledAt(2,e,t)})},t}(),$=function(){function t(e){this._result=void 0,this._state=0,this._subscribers=[],this[J]=P(),l!==e&&("function"!=typeof e&&O(),this instanceof t?M(this,e):Y())}return t.resolve=function(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(l);return b(n,t),n},t.reject=function(t){var e=new this(l);return A(e,t),e},t.all=function(t){return new Z(this,t).promise},t.race=function(t){var e,n=this;return e=L(t)?function(e,r){for(var o=t.length,i=0;i<o;i++)n.resolve(t[i]).then(e,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))},new this(e)},t.prototype["catch"]=function(t){return this.then(void 0,t)},t.prototype.then=function(t,e){var n=this,r=new(this.constructor(l));void 0===r[J]&&x(r);var o=n._state;if(o){var i=arguments[o-1];U(function(){return T(o,r,i,n._result)},void 0)}else j(n,r,t,e);return r},t._setScheduler=n,t._setAsap=r,t._asap=U,t}(),tt=$.prototype.then,et=$.resolve;return $.polyfill=k,$.Promise=$,$});